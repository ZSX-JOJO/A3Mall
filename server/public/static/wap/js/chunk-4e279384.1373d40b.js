(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e279384"],{"384d":function(t,e,i){"use strict";var s=i("caed"),a=i.n(s);a.a},"40db":function(t,e,i){},"4d41":function(t,e,i){t.exports=i.p+"static/wap/img/avatar.1ba4f24b.png"},caed:function(t,e,i){},deea:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nav-bar",{attrs:{title:"商品详情","left-arrow":"",fixed:!0,placeholder:!0,"z-index":9999,"right-arrow":"","right-icon":"share"},on:{"click-left":t.prev,"click-right":t.right}}),s("div",{style:"height:"+t.clientHeight+"px"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[s("van-swipe",{staticClass:"swiper-box",attrs:{loop:!0},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[s("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t,e){return s("van-swipe-item",{key:e},[s("img",{attrs:{src:t}})])})),1),s("div",{staticClass:"goods-price"},[s("div",{staticClass:"price"},[s("span",[t._v("￥"),s("i",[t._v(t._s(t.products.sell_price))])]),s("span",[t._v("原价格"),s("i",[t._v("￥"+t._s(t.products.market_price))])])]),s("div",{staticClass:"count-down-box"},[s("count-down",{attrs:{"now-time":t.products.now_time,"start-time":t.products.start_time,"end-time":t.products.end_time,status:t.isActivityStatus},on:{"update:status":function(e){t.isActivityStatus=e}}})],1)]),s("div",{staticClass:"goods-info clear"},[s("div",{staticClass:"title"},[t._v(" "+t._s(t.products.title)+" ")]),s("div",{staticClass:"goods-info-box"},[s("span",[t._v("库存: "+t._s(t.products.store_nums)+"件")]),s("span",[t._v("销量: "+t._s(t.products.sale)+"件")])])]),t.group.count>0?s("div",{staticClass:"add-wrap clear"},[s("div",{staticClass:"title"},[t._v(t._s(t.group.count)+"人在拼单，可直接参与")]),s("div",{staticClass:"add-list clear"},[s("van-swipe",{staticStyle:{height:"132px"},attrs:{autoplay:3e3,vertical:"","show-indicators":!1}},t._l(t.group.list,(function(e,a){return s("van-swipe-item",{key:a},t._l(e,(function(e,a){return s("div",{key:a,staticClass:"item-box"},[s("div",{staticClass:"avatar"},[e.avatar?t._e():s("img",{attrs:{src:i("4d41")}}),e.avatar?s("img",{attrs:{src:e.avatar}}):t._e()]),s("div",{staticClass:"username"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"info"},[e.people>0?s("div",{staticClass:"a"},[t._v("还差"),s("i",[t._v(t._s(e.people))]),t._v("人成团")]):t._e(),e.people<=0?s("div",{staticClass:"a",staticStyle:{"margin-top":"24px"}},[t._v("己有"),s("i",[t._v(t._s(e.people_count))]),t._v("人成团")]):t._e(),e.people>0?s("div",{staticClass:"b",staticStyle:{"font-size":"12px"}},[s("count-down",{attrs:{theme:"","now-time":e.now_time,"start-time":e.start_time,"end-time":e.end_time,startText:"",endText:"",finishText:"",dayText:":",hourText:":",minuteText:":",secondText:""}})],1):t._e()]),s("div",{staticClass:"btn"},[s("span",{on:{click:function(i){return t.goCart(e.id,e.kid)}}},[t._v("去拼单")])])])})),0)})),1)],1)]):t._e(),s("div",{staticClass:"group-wrap clear"},[s("div",{staticClass:"title"},[s("div",[t._v("拼团玩法")])]),s("div",{staticClass:"group-box"},[s("div",{staticClass:"line"}),s("div",{staticClass:"item"},[s("span",[t._v("1")]),s("span",[t._v("开团/参团")])]),s("div",{staticClass:"item"},[s("span",[t._v("2")]),s("span",[t._v("邀请好友")])]),s("div",{staticClass:"item"},[s("span",[t._v("3")]),s("span",[t._v("满员发货")])])])]),s("div",{staticClass:"goods-comments clear"},[s("div",{staticClass:"title"},[s("span",[t._v("商品评价")]),t.comments.length>0?s("span",{on:{click:function(e){return t.$router.push("/comments/group/"+t.products.goods_id)}}},[t._v("更多 >")]):t._e()]),t.comments.length<=0?s("div",{staticClass:"comments-empty"},[t._v("该商品还没有评论哦！")]):t._e(),t.comments.length>0?s("div",{staticClass:"goods-comments-list clear"},t._l(t.comments,(function(e,i){return s("div",{key:i,staticClass:"goods-comments-box clear"},[s("div",{staticClass:"t"},[s("div",{staticClass:"u"},[s("span",[s("img",{attrs:{src:e.avatar}})]),s("span",[t._v(t._s(e.username))])]),s("div",{staticClass:"time"},[t._v(t._s(e.time))])]),s("div",{staticClass:"c"},[t._v(t._s(e.content))]),e.reply_content?s("div",{staticClass:"d"},[s("div",{staticClass:"d-1"},[t._v("商家回复")]),s("div",{staticClass:"d-2"},[t._v(t._s(e.reply_content))])]):t._e()])})),0):t._e()]),s("div",{staticClass:"goods-content clear"},[s("div",{staticClass:"title"},[t._v("图文详情")]),s("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img",loading:"../../assets/images/loader.gif"},expression:"{ selector: 'img', loading: '../../assets/images/loader.gif' }"}],staticClass:"clear",domProps:{innerHTML:t._s(t.html)}})])],1)],1),s("sku-action",{attrs:{goods:t.products,attribute:t.attribute,item:t.item,"goods-info":t.selectedGoodsInfo,fields:t.fields},on:{"update:goodsInfo":function(e){t.selectedGoodsInfo=e},"update:goods-info":function(e){t.selectedGoodsInfo=e}},model:{value:t.isSkuStatus,callback:function(e){t.isSkuStatus=e},expression:"isSkuStatus"}}),s("goods-action",[s("goods-action-icon",{attrs:{icon:"home",text:"首页"},on:{click:function(e){return t.$router.replace("/")}}}),s("goods-action-button",{attrs:{type:"cart",text:"单独购买"},on:{click:t.onAddCartClicked}}),s("goods-action-button",{attrs:{type:"buy",text:"发起拼单"},on:{click:t.onBuyClicked}})],1),s("van-popup",{style:{width:"80%"},model:{value:t.isPoster,callback:function(e){t.isPoster=e},expression:"isPoster"}},[s("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.src}}),s("vue-canvas-poster",{staticClass:"poster",staticStyle:{display:"none"},attrs:{widthPixels:1e3,painting:t.painting},on:{success:t.success,fail:t.fail}})],1)],1)},a=[],o=(i("b0c0"),i("ac1f"),i("5319"),i("ade3")),n=(i("4b0a"),i("2bb1")),c=(i("7844"),i("5596")),r=(i("ab71"),i("58e6")),d=(i("68ef"),i("40db"),i("d282")),u=i("4598"),l=i("68ed"),p=1e3,m=60*p,h=60*m,f=24*h;function v(t){var e=Math.floor(t/f),i=Math.floor(t%f/h),s=Math.floor(t%h/m),a=Math.floor(t%m/p),o=Math.floor(t%p);return{days:e,hours:i,minutes:s,seconds:a,milliseconds:o}}function g(t,e){var i=e.days,s=e.hours,a=e.minutes,o=e.seconds,n=e.milliseconds;if(-1===t.indexOf("DD")?s+=24*i:t=t.replace("DD",Object(l["b"])(i)),-1===t.indexOf("HH")?a+=60*s:t=t.replace("HH",Object(l["b"])(s)),-1===t.indexOf("mm")?o+=60*a:t=t.replace("mm",Object(l["b"])(a)),-1===t.indexOf("ss")?n+=1e3*o:t=t.replace("ss",Object(l["b"])(o)),-1!==t.indexOf("S")){var c=Object(l["b"])(n,3);t=-1!==t.indexOf("SSS")?t.replace("SSS",c):-1!==t.indexOf("SS")?t.replace("SS",c.slice(0,2)):t.replace("S",c.charAt(0))}return t}function _(t,e){return Math.floor(t/1e3)===Math.floor(e/1e3)}var b,x=Object(d["a"])("count-down"),k=x[0],C=x[1],S=k({props:{millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0}},data:function(){return{remain:0}},computed:{timeData:function(){return v(this.remain)},formattedTime:function(){return g(this.format,this.timeData)}},watch:{time:{immediate:!0,handler:"reset"}},activated:function(){this.keepAlivePaused&&(this.counting=!0,this.keepAlivePaused=!1,this.tick())},deactivated:function(){this.counting&&(this.pause(),this.keepAlivePaused=!0)},beforeDestroy:function(){this.pause()},methods:{start:function(){this.counting||(this.counting=!0,this.endTime=Date.now()+this.remain,this.tick())},pause:function(){this.counting=!1,Object(u["a"])(this.rafId)},reset:function(){this.pause(),this.remain=+this.time,this.autoStart&&this.start()},tick:function(){this.millisecond?this.microTick():this.macroTick()},microTick:function(){var t=this;this.rafId=Object(u["c"])((function(){t.counting&&(t.setRemain(t.getRemain()),t.remain>0&&t.microTick())}))},macroTick:function(){var t=this;this.rafId=Object(u["c"])((function(){if(t.counting){var e=t.getRemain();_(e,t.remain)&&0!==e||t.setRemain(e),t.remain>0&&t.macroTick()}}))},getRemain:function(){return Math.max(this.endTime-Date.now(),0)},setRemain:function(t){this.remain=t,this.$emit("change",this.timeData),0===t&&(this.pause(),this.$emit("finish"))}},render:function(){var t=arguments[0];return t("div",{class:C()},[this.slots("default",this.timeData)||this.formattedTime])}}),y=(i("8a58"),i("e41f")),w=(i("66cf"),i("343b")),O=(i("e7e5"),i("d399")),j=i("2b0e"),I=i("85b3"),$=i("3050"),R=i("d434"),T=i("7cc0"),D=i("ed72"),G=i("a65e"),A=i("33a5"),E=i.n(A);O["a"].setDefaultOptions({duration:5e3}),j["a"].use(w["a"]),j["a"].use(y["a"]),j["a"].use(E.a);var H={name:"GroupView",components:(b={CountDown:S},Object(o["a"])(b,r["a"].name,r["a"]),Object(o["a"])(b,$["a"].name,$["a"]),Object(o["a"])(b,c["a"].name,c["a"]),Object(o["a"])(b,n["a"].name,n["a"]),Object(o["a"])(b,T["a"].name,T["a"]),Object(o["a"])(b,G["a"].name,G["a"]),Object(o["a"])(b,D["a"].name,D["a"]),Object(o["a"])(b,S.name,S),Object(o["a"])(b,R["a"].name,R["a"]),Object(o["a"])(b,I["a"].name,I["a"]),b),data:function(){return{fields:["id","goods_id"],images:[],isSkuStatus:!1,selectedGoodsInfo:{},products:{},attribute:[],item:{},current:0,isRefresh:!1,kId:0,group:{},isActivityStatus:0,clientHeight:window.outerHeight-50,comments:[],html:"",src:"",painting:{}}},created:function(){this.onLoad()},methods:{right:function(){this.isPoster=!0},success:function(t){this.src=t},fail:function(t){console.log("fail",t)},onLoad:function(){var t=this;this.$http.getGroupDetail({id:this.$route.params.id}).then((function(e){t.products=e.data.goods;var s=t.$request.domain()+"static/images/loader.gif";t.html=e.data.goods.content.replace(/src=/g," data-loading='"+s+"' data-src="),t.attribute=e.data.attr,t.item=e.data.item,t.images=e.data.photo,t.group=e.data.group,t.comments=e.data.comments,t.painting={width:"550px",height:"876px",background:"#f4f5f7",views:[{type:"image",url:void 0!=t.images[0]?t.images[0]:i("0f7b"),css:{top:"30px",left:"25px",width:"500px",height:"432px"}},{type:"text",text:t.products.title,css:{top:"487px",left:"25px",textIndent:"0px",color:"#666666",fontSize:"22px",width:"460px",lineHeight:"33px",maxLines:2}},{id:"price",type:"text",text:"¥"+t.products.sell_price,css:{top:"580px",left:"25px",color:"#E5463E",fontSize:"36px",fontWeight:"bold"}},{type:"text",text:"¥"+t.products.market_price,css:{top:"639px",left:"25px",color:"#999999",fontSize:"26px",fontWeight:"bold",textDecoration:"line-through"}},{type:"text",text:"长按或扫描二维码",css:{fontSize:"18px",color:"#999999",bottom:"22px",left:"385px"}},{type:"text",text:"A3Mall B2C商城",css:{left:"26px",bottom:"22px",fontSize:"18px",color:"#999999"}},{type:"qrcode",content:window.location.href,css:{bottom:"50px",right:"26px",color:"#000",width:"130px",height:"130px"}}]}})).catch((function(e){t.$router.replace("/404")}))},onChange:function(t){this.current=t},onRefresh:function(){var t=this;setTimeout((function(){t.isRefresh=!1,t.onLoad()}),1500)},onBuyClicked:function(){var t=this;return 0==this.isActivityStatus?(Object(O["a"])("活动己结束！"),!1):2==this.isActivityStatus?(Object(O["a"])("活动未开始！"),!1):0!=this.isSkuStatus?this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.id,kid:t.kId,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"group"}}),t.kId=0})).catch((function(){t.$storage.set("VUE_REFERER","/group/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(O["a"])("请选择规格！"),!1):void(this.isSkuStatus=!0)},onAddCartClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.goods_id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"buy"}})})).catch((function(){t.$storage.set("VUE_REFERER","/group/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(O["a"])("请选择规格！"),!1);this.isSkuStatus=!0},prev:function(){this.$tools.prev()},goCart:function(t,e){var i=this,s=this.$storage.get("users",!0);if(void 0!=s&&s.id==e)return Object(O["a"])("亲不能和自己拼单哦！"),!1;O["a"].clear(),this.$http.checkGroupCart({id:t}).then((function(e){e.status?(i.kId=t,i.isSkuStatus=!0):Object(O["a"])(e.info)})).catch((function(t){Object(O["a"])(t)}))}},watch:{isShow:function(t){!1===t&&(this.kId=0)}}},M=H,z=(i("384d"),i("2877")),P=Object(z["a"])(M,s,a,!1,null,"7c88d494",null);e["default"]=P.exports}}]);