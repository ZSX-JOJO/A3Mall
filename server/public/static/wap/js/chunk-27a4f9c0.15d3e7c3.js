(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a4f9c0"],{"0653":function(t,e,s){"use strict";s("68ef"),s("5c56")},"0743":function(t,e,s){"use strict";var i=s("9f7a"),a=s.n(i);a.a},1146:function(t,e,s){},"1a04":function(t,e,s){},"2af1":function(t,e,s){"use strict";var i=s("b402"),a=s.n(i);a.a},"34e9":function(t,e,s){"use strict";var i=s("2638"),a=s.n(i),n=s("d282"),r=s("ba31"),o=s("b1d2"),l=Object(n["a"])("cell-group"),c=l[0],d=l[1];function u(t,e,s,i){var n,l=t("div",a()([{class:[d(),(n={},n[o["d"]]=e.border,n)]},Object(r["b"])(i,!0)]),[null==s.default?void 0:s.default()]);return e.title||s.title?t("div",[t("div",{class:d("title")},[s.title?s.title():e.title]),l]):l}u.props={title:String,border:{type:Boolean,default:!0}},e["a"]=c(u)},3631:function(t,e,s){"use strict";var i=s("cce7"),a=s.n(i);a.a},5246:function(t,e,s){"use strict";s("68ef"),s("9d70"),s("3743"),s("8a0b")},"565f":function(t,e,s){"use strict";var i=s("2638"),a=s.n(i),n=s("c31d"),r=s("a8fa"),o=s("482d"),l=s("1325"),c=s("d282"),d=s("a142"),u=s("ea8e"),h=s("ad06"),f=s("7744"),p=s("dfaf"),v=Object(c["a"])("field"),m=v[0],g=v[1];e["a"]=m({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(n["a"])({},p["a"],{name:String,rules:Array,disabled:Boolean,readonly:Boolean,autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[Number,String],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){if(this.clearable&&!this.readonly){var t=Object(d["c"])(this.value)&&""!==this.value,e="always"===this.clearTrigger||"focus"===this.clearTrigger&&this.focused;return t&&e}},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return Object(n["a"])({},this.$listeners,{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(u["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(s){var i=e.validator(t,e);if(Object(d["f"])(i))return i.then(s);s(i)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:0!==t&&!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var s=e.message;return Object(d["d"])(s)?s(t,e):s},runRules:function(t){var e=this;return t.reduce((function(t,s){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return s.formatter&&(t=s.formatter(t,s)),e.runSyncRule(t,s)?s.validator?e.runValidator(t,s).then((function(i){!1===i&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,s))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,s)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(s){t||s(),e.resetValidation(),e.runRules(t).then((function(){e.validateFailed?s({name:e.name,message:e.validateMessage}):s()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,s=this.rules.filter((function(s){return s.trigger?s.trigger===t:e}));this.validate(s)}},resetValidation:function(){this.validateFailed&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=Object(d["c"])(t)?String(t):"";var s=this.maxlength;if(Object(d["c"])(s)&&t.length>s&&(t=this.value&&this.value.length===+s?this.value:t.slice(0,s)),"number"===this.type||"digit"===this.type){var i="number"===this.type;t=Object(o["a"])(t,i,i)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var a=this.$refs.input;a&&t!==a.value&&(a.value=t),t!==this.value&&this.$emit("input",t)},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.readonly&&this.blur()},onBlur:function(t){this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),Object(r["a"])()},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(l["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var s=this.getProp("submitOnEnter");s||"textarea"===this.type||Object(l["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){t.style.height="auto";var e=t.scrollHeight;if(Object(d["e"])(this.autosize)){var s=this.autosize,i=s.maxHeight,a=s.minHeight;i&&(e=Math.min(e,i)),a&&(e=Math.max(e,a))}e&&(t.style.height=e+"px")}},genInput:function(){var t=this.$createElement,e=this.type,s=this.slots("input"),i=this.getProp("inputAlign");if(s)return t("div",{class:g("control",[i,"custom"]),on:{click:this.onClickInput}},[s]);var r={ref:"input",class:g("control",i),domProps:{value:this.value},attrs:Object(n["a"])({},this.$attrs,{name:this.name,disabled:this.disabled,readonly:this.readonly,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",a()([{},r]));var o,l=e;return"number"===e&&(l="text",o="decimal"),"digit"===e&&(l="tel",o="numeric"),t("input",a()([{attrs:{type:l,inputmode:o}},r]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:g("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(h["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,s=e("right-icon")||this.rightIcon;if(s)return t("div",{class:g("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(h["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:g("word-limit")},[t("span",{class:g("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var s=this.getProp("errorMessageAlign");return t("div",{class:g("error-message",s)},[e])}}},getProp:function(t){return Object(d["c"])(this[t])?this[t]:this.vanForm&&Object(d["c"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],s=this.slots,i=this.getProp("labelAlign"),a={icon:this.genLeftIcon},n=this.genLabel();n&&(a.title=function(){return n});var r=this.slots("extra");return r&&(a.extra=function(){return r}),e(f["a"],{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:g("value"),titleClass:[g("label",i),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:a,class:g((t={error:this.showError,disabled:this.disabled},t["label-"+i]=i,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:g("body")},[this.genInput(),this.showClear&&e(h["a"],{attrs:{name:"clear"},class:g("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),s("button")&&e("div",{class:g("button")},[s("button")])]),this.genWordLimit(),this.genMessage()])}})},"5c56":function(t,e,s){},"645f":function(t,e,s){"use strict";var i=s("773a"),a=s.n(i);a.a},"6b41":function(t,e,s){"use strict";var i=s("d282"),a=s("b1d2"),n=s("ad06"),r=Object(i["a"])("nav-bar"),o=r[0],l=r[1];e["a"]=o({props:{title:String,fixed:Boolean,zIndex:[Number,String],leftText:String,rightText:String,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,border:{type:Boolean,default:!0}},data:function(){return{height:null}},mounted:function(){this.placeholder&&this.fixed&&(this.height=this.$refs.navBar.getBoundingClientRect().height)},methods:{genLeft:function(){var t=this.$createElement,e=this.slots("left");return e||[this.leftArrow&&t(n["a"],{class:l("arrow"),attrs:{name:"arrow-left"}}),this.leftText&&t("span",{class:l("text")},[this.leftText])]},genRight:function(){var t=this.$createElement,e=this.slots("right");return e||(this.rightText?t("span",{class:l("text")},[this.rightText]):void 0)},genNavBar:function(){var t,e=this.$createElement;return e("div",{ref:"navBar",style:{zIndex:this.zIndex},class:[l({fixed:this.fixed,"safe-area-inset-top":this.safeAreaInsetTop}),(t={},t[a["b"]]=this.border,t)]},[e("div",{class:l("content")},[this.hasLeft()&&e("div",{class:l("left"),on:{click:this.onClickLeft}},[this.genLeft()]),e("div",{class:[l("title"),"van-ellipsis"]},[this.slots("title")||this.title]),this.hasRight()&&e("div",{class:l("right"),on:{click:this.onClickRight}},[this.genRight()])])])},hasLeft:function(){return this.leftArrow||this.leftText||this.slots("left")},hasRight:function(){return this.rightText||this.slots("right")},onClickLeft:function(t){this.$emit("click-left",t)},onClickRight:function(t){this.$emit("click-right",t)}},render:function(){var t=arguments[0];return this.placeholder&&this.fixed?t("div",{class:l("placeholder"),style:{height:this.height+"px"}},[this.genNavBar()]):this.genNavBar()}})},"773a":function(t,e,s){},7744:function(t,e,s){"use strict";var i=s("c31d"),a=s("2638"),n=s.n(a),r=s("d282"),o=s("a142"),l=s("ba31"),c=s("48f4"),d=s("dfaf"),u=s("ad06"),h=Object(r["a"])("cell"),f=h[0],p=h[1];function v(t,e,s,i){var a=e.icon,r=e.size,d=e.title,h=e.label,f=e.value,v=e.isLink,m=s.title||Object(o["c"])(d);function g(){var i=s.label||Object(o["c"])(h);if(i)return t("div",{class:[p("label"),e.labelClass]},[s.label?s.label():h])}function b(){if(m)return t("div",{class:[p("title"),e.titleClass],style:e.titleStyle},[s.title?s.title():t("span",[d]),g()])}function _(){var i=s.default||Object(o["c"])(f);if(i)return t("div",{class:[p("value",{alone:!m}),e.valueClass]},[s.default?s.default():t("span",[f])])}function y(){return s.icon?s.icon():a?t(u["a"],{class:p("left-icon"),attrs:{name:a,classPrefix:e.iconPrefix}}):void 0}function C(){var i=s["right-icon"];if(i)return i();if(v){var a=e.arrowDirection;return t(u["a"],{class:p("right-icon"),attrs:{name:a?"arrow-"+a:"arrow"}})}}function k(t){Object(l["a"])(i,"click",t),Object(c["a"])(i)}var S=v||e.clickable,x={clickable:S,center:e.center,required:e.required,borderless:!e.border};return r&&(x[r]=r),t("div",n()([{class:p(x),attrs:{role:S?"button":null,tabindex:S?0:null},on:{click:k}},Object(l["b"])(i)]),[y(),b(),_(),C(),null==s.extra?void 0:s.extra()])}v.props=Object(i["a"])({},d["a"],c["c"]),e["a"]=f(v)},"7cc0e":function(t,e,s){"use strict";s.r(e);var i,a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:"确认订单","left-arrow":"",fixed:!0,placeholder:!0,"z-index":99999},on:{"click-left":t.prev}}),t.isShipping?s("div",{staticClass:"distribution"},[s("span",{class:{active:1==t.shippingType},on:{click:function(e){return t.onShipping(1)}}},[t._v("快递配送")]),s("span",{class:{active:2==t.shippingType},on:{click:function(e){return t.onShipping(2)}}},[t._v("到店自提")])]):t._e(),t.isShipping?s("div",{staticClass:"distribution-placeholder"}):t._e(),1==t.shippingType?s("div",{staticClass:"top"},[s("span",{staticClass:"top-map"},[s("van-icon",{attrs:{name:"location-o",size:"18px",color:"#888"}})],1),s("div",{staticClass:"address",on:{click:function(e){t.isAddressStatus=!0}}},[t.address.tel?s("div",{staticClass:"info"},[t.address.name?s("span",[t._v("收件人："+t._s(t.address.name))]):t._e(),t.address.tel?s("span",[t._v("手机号："+t._s(t.address.tel))]):t._e()]):t._e(),t.address.tel?t._e():s("div",{staticClass:"info"},[s("span",{staticStyle:{position:"relative",top:"-5px"}},[t._v("请选择地址")])]),t.address.address?s("div",{staticClass:"address-info"},[t._v(t._s(t.address.address))]):t._e()]),s("span",{staticClass:"arrow-right"},[s("van-icon",{attrs:{name:"arrow",size:"18px",color:"#888"}})],1)]):t._e(),2==t.shippingType?s("div",{staticClass:"top"},[s("span",{staticClass:"top-map"},[s("van-icon",{attrs:{name:"location-o",size:"18px",color:"#888"}})],1),s("div",{staticClass:"address",on:{click:function(e){t.isStoreStatus=!0}}},[s("div",{staticClass:"info"},[t.store.name?s("span",[t._v("门店名称："+t._s(t.store.name))]):t._e()]),t.store.tel?t._e():s("div",{staticClass:"info"},[s("span",{staticStyle:{position:"relative",top:"-5px"}},[t._v("请选择地址")])]),s("div",{staticClass:"address-info"},[t.store.tel?s("p",[t._v("手机号："+t._s(t.store.tel))]):t._e(),t.store.address?s("p",[t._v(t._s(t.store.address))]):t._e()])]),s("span",{staticClass:"arrow-right"},[s("van-icon",{attrs:{name:"arrow",size:"18px",color:"#888"}})],1)]):t._e(),s("div",{staticClass:"goods"},[s("div",{staticClass:"title"},[s("span",[t._v("共"+t._s(t.orderData.item.length)+"件商品")])]),s("div",{staticClass:"goods-box"},t._l(t.orderData.item,(function(e,i){return s("div",{key:i,staticClass:"goods-item clear"},[s("div",{staticClass:"goods-img"},[s("img",{attrs:{src:e.thumb_image}})]),s("div",{staticClass:"goods-info"},[s("div",{staticClass:"t"},[s("span",[t._v(t._s(e.title))]),s("span",[t._v("￥"+t._s(e.sell_price))])]),s("div",{staticClass:"b"},[e.goods_array?s("span",t._l(e.goods_array,(function(e,i){return s("i",{key:i},[t._v(" "+t._s(e.name)+"："+t._s(e.value)+" ")])})),0):t._e(),s("span",[t._v("× "+t._s(e.goods_nums))])])])])})),0)]),s("div",{staticClass:"order"},[t._m(0),s("van-cell-group",[s("van-cell",{attrs:{title:"优惠劵：",value:t.bonusText},on:{click:function(e){t.isCouponStatus=!t.isCouponStatus}}}),s("van-cell",{attrs:{title:"商品金额：",value:"￥"+t.orderData.real_amount}}),s("van-cell",{attrs:{title:"运费金额：",value:"￥"+t.orderData.real_freight}}),t.orderData.real_point>0?s("van-cell",{attrs:{title:"需要积分：",value:t.orderData.real_point+"积分","value-class":"money"}}):t._e(),s("van-cell",{attrs:{title:"订单总额：",value:"￥"+t.orderData.payable_amount,"value-class":"money"}})],1)],1),s("div",{staticClass:"order"},[t._m(1),s("van-field",{attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"100",placeholder:"请输入留言","show-word-limit":""},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1),s("div",{staticClass:"order"},[t._m(2),s("div",{staticClass:"payment-box"},[s("div",{staticClass:"payment-item",on:{click:function(e){return t.selectPayment("wechat")}}},[t._m(3),s("span",{class:{activeColor:"wechat"==t.payment}},[t._v("微信支付")]),s("span",{class:{active:"wechat"==t.payment}},[s("i",{staticClass:"fa fa-check"})])]),0==t.$tools.isWeiXin()?s("div",{staticClass:"payment-item",on:{click:function(e){return t.selectPayment("alipay")}}},[t._m(4),s("span",{class:{activeColor:"alipay"==t.payment}},[t._v("支付宝")]),s("span",{class:{active:"alipay"==t.payment}},[s("i",{staticClass:"fa fa-check"})])]):t._e(),s("div",{staticClass:"payment-item",on:{click:function(e){return t.selectPayment("balance")}}},[t._m(5),s("span",{class:{activeColor:"balance"==t.payment}},[t._v("余额支付"),s("i",[t._v("可用余额: ￥"+t._s(t.orderData.users_price)+"元")])]),s("span",{class:{active:"balance"==t.payment}},[s("i",{staticClass:"fa fa-check"})])])])]),s("coupon",{attrs:{coupons:t.coupons},on:{"coupon-event":t.onCoupons},model:{value:t.isCouponStatus,callback:function(e){t.isCouponStatus=e},expression:"isCouponStatus"}}),s("address-list",{attrs:{array:t.addressList},on:{onAdd:t.onAdd,"address-event":t.onSelectedAddress},model:{value:t.isAddressStatus,callback:function(e){t.isAddressStatus=e},expression:"isAddressStatus"}}),s("address-list",{attrs:{array:t.storeList,add:!1,tips:"暂无自提门店"},on:{"address-event":t.onSelectedStore},model:{value:t.isStoreStatus,callback:function(e){t.isStoreStatus=e},expression:"isStoreStatus"}}),s("div",{staticClass:"operation-placeholder"}),s("div",{staticClass:"operation"},[s("span",{staticClass:"amount"},[s("i",[t._v("合计：")]),t.orderData.order_amount?s("i",[t._v("￥"+t._s(t.orderData.order_amount))]):s("i",[t._v("￥"+t._s(t.orderData.payable_amount))])]),s("span",{staticClass:"pay",on:{click:t.onOrderSubmit}},[t._v("提交订单")])])],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("span",[t._v("订单信息")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("span",[t._v("备注内容")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("span",[t._v("支付方式")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"fa fa-weixin",staticStyle:{color:"#fff","background-color":"#41b035"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"iconfont iconumidd17",staticStyle:{color:"#fff","background-color":"#1296db"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[s("i",{staticClass:"fa fa-jpy",staticStyle:{color:"#fff","background-color":"#fe960f"}})])}],r=(s("b0c0"),s("ac1f"),s("5319"),s("e7e5"),s("d399")),o=s("ade3"),l=(s("be7f"),s("565f")),c=(s("c3a6"),s("ad06")),d=(s("0653"),s("34e9")),u=(s("c194"),s("7744")),h=(s("5246"),s("6b41")),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"coupon-action",class:{"coupon-show":1==t.value},staticStyle:{"background-color":"#f8f8f8"}},[s("div",{staticClass:"coupon-title"},[t._v("选择优惠劵")]),s("div",{staticClass:"coupon-body",style:{"max-height":t.maxHeight+"px"}},[t.coupons.length<=0?s("div",{staticClass:"coupon-empty"},[t._v(" 暂无优惠劵 ")]):t._e(),t.coupons.length?s("div",{staticClass:"coupon-list"},t._l(t.coupons,(function(e,i){return s("div",{key:i,staticClass:"coupon-box",on:{click:function(s){return t.onCoupon(e)}}},[s("div",{staticClass:"coupon-l-box"},[s("div",{staticClass:"coupon-amount"},[t._v(" "+t._s(e.price)+" "),s("span",[t._v("元")])]),s("div",{staticClass:"coupon-condition"},[t._v(t._s(e.condition))])]),s("div",{staticClass:"coupon-r-box"},[s("div",{staticClass:"coupon-name"},[t._v(t._s(e.name))]),s("div",{staticClass:"coupon-valid"},[t._v(t._s(e.startAt)+" - "+t._s(e.endAt))])]),s("div",{staticClass:"coupon-corner-checkbox"},[s("span",{staticClass:"iconfont",class:{active:t.active==e.id}},[t._v("")])])])})),0):t._e(),s("div",{staticStyle:{width:"100%",height:"60px",float:"left"}})]),s("i",{staticClass:"fa fa-times-circle",attrs:{id:"close"},on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}}),s("div",{staticClass:"coupon-button",on:{click:t.onCancelBonus}},[s("span",[t._v("不使用优惠劵")])])]),s("popup",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},p=[],v=s("badd"),m={name:"Coupon",components:Object(o["a"])({},v["a"].name,v["a"]),props:{value:{type:Boolean,default:!1},coupons:{type:Array,default:function(){return[]}}},data:function(){return{maxHeight:0,active:0}},mounted:function(){this.maxHeight=window.innerHeight-200},watch:{},methods:{onClose:function(){this.$emit("input",!this.value)},onCoupon:function(t){this.active=t.id,this.$emit("coupon-event",{id:t.id,value:"-￥"+t.valueDesc+t.unitDesc})},onCancelBonus:function(){this.active=0,this.$emit("coupon-event",{id:0,value:this.coupons.length<=0?"暂无优惠劵":this.coupons.length+"张可用"})}}},g=m,b=(s("2af1"),s("2877")),_=Object(b["a"])(g,f,p,!1,null,"6cf7859f",null),y=_.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"address-action",class:{"address-show":1==t.value},staticStyle:{"background-color":"#f8f8f8"}},[s("div",{staticClass:"address-title"},[t._v("请选择地址")]),s("div",{staticClass:"address-body",style:{"max-height":t.maxHeight+"px"}},[t.array.length<=0?s("div",{staticClass:"address-empty"},[t._v(" "+t._s(t.tips)+" ")]):t._e(),t.array.length?s("div",{staticClass:"address-list"},t._l(t.array,(function(e,i){return s("div",{key:i,staticClass:"address-box",on:{click:function(s){return t.onSelect(e)}}},[s("div",{staticClass:"address-r-box"},[s("div",{staticClass:"address-name"},[t._v(t._s(e.name)+" "+t._s(e.tel))]),s("div",{staticClass:"address-valid"},[t._v(t._s(e.address))])]),s("div",{staticClass:"address-corner-checkbox"},[s("span",{staticClass:"iconfont",class:{active:t.active==e.id}},[t._v("")])])])})),0):t._e(),s("div",{staticStyle:{width:"100%",height:"60px",float:"left"}})]),s("i",{staticClass:"fa fa-times-circle",attrs:{id:"close"},on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}}),t.add?s("div",{staticClass:"address-button",on:{click:t.onAddAddress}},[s("span",[t._v("新增地址")])]):t._e()]),s("popup",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},k=[],S={name:"AddressList",components:Object(o["a"])({},v["a"].name,v["a"]),props:{add:{type:Boolean,default:!0},tips:{type:String,default:"您还没有添加地址哦"},value:{type:Boolean,default:!1},array:{type:Array,default:function(){return[]}}},data:function(){return{maxHeight:0,active:0}},mounted:function(){this.maxHeight=window.innerHeight-200},watch:{},methods:{onClose:function(){this.$emit("input",!this.value)},onSelect:function(t){this.active=t.id,this.$emit("address-event",t)},onAddAddress:function(){this.$emit("onAdd",{})}}},x=S,$=(s("0743"),Object(b["a"])(x,C,k,!1,null,"7d6d7b25",null)),O=$.exports,w={name:"CartConfirm",components:(i={},Object(o["a"])(i,h["a"].name,h["a"]),Object(o["a"])(i,u["a"].name,u["a"]),Object(o["a"])(i,d["a"].name,d["a"]),Object(o["a"])(i,c["a"].name,c["a"]),Object(o["a"])(i,l["a"].name,l["a"]),Object(o["a"])(i,O.name,O),Object(o["a"])(i,y.name,y),i),data:function(){return{shippingType:1,isShipping:0,storeList:[],store:{id:"",name:"",tel:"",address:""},chosenStoreId:"0",isStoreStatus:!1,isCouponStatus:!1,isAddressStatus:!1,bonusText:"请选择",address:{id:"",name:"",tel:"",address:""},chosenAddressId:"0",bonusId:"0",addressList:[],orderData:{item:{},real_amount:0,real_freight:0,payable_amount:0,order_amount:0,users_price:0,real_point:0,users_point:0,type:0},remarks:"",payment:"wechat",coupons:[],params:null,orderBtnFlag:!1}},created:function(){var t=this.$route.query.type,e=this.$route.query.id,s={id:e,type:t};void 0==t&&this.$tools.prev(),this.$tools.in_array(t,["buy","point","second","regiment","special","group"])&&(s.sku_id=this.$route.query.sku_id,s.num=this.$route.query.num,this.$route.query.kid&&(s.kid=this.$route.query.kid)),s.shipping_type=this.shippingType,this.params=s,this.onLoadOrder()},methods:{onLoadOrder:function(){var t=this;r["a"].loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0}),this.$http.getCartConfirm(this.params).then((function(e){if(r["a"].clear(),e.status){t.orderData=e.data,t.isShipping=parseInt(e.data.is_shipping),t.storeList=e.data.store;var s=t.$storage.get("ORDER_ADDRESS_ID");if(s){for(var i in e.data.address.list)if(e.data.address.list[i].id==s){t.chosenAddressId=e.data.address.list[i].id,t.address=e.data.address.list[i];break}}else e.data.address.default&&(t.chosenAddressId=e.data.address.default.id,t.address=e.data.address.default);e.data.address.list.length&&(t.addressList=e.data.address.list),t.storeList.length&&""==t.store.id&&(t.store=t.storeList[0],t.chosenStoreId=t.store.id),t.coupons=e.data.bonus,"请选择"==t.bonusText&&(t.bonusText=e.data.bonus.length<=0?"暂无优惠劵":e.data.bonus.length+"张可用")}else t.$router.push({path:"/cart/msg",query:{msg:e.info}})}))},prev:function(){this.$tools.prev()},onOrderSubmit:function(){var t=this;if(this.orderBtnFlag)return!1;if(this.orderData.real_point>this.orderData.users_point)return Object(r["a"])("您的积分不足，不能购买此商品"),!1;if(2==this.shippingType&&""==this.store.id)return Object(r["a"])("请先选择自提门店"),!1;this.orderBtnFlag=!0,r["a"].loading({message:"加载中...",forbidClick:!0,loadingType:"spinner",duration:0});var e={};Object.assign(e,{id:this.params.id,type:this.params.type,address_id:this.chosenAddressId,store_id:this.chosenStoreId,shipping_type:this.shippingType,bonus_id:this.bonusId,payment:this.payment,remarks:this.remarks,source:this.$tools.isWeiXin()?2:1,url:document.location.href},this.params),this.$http.createOrder(e).then((function(e){r["a"].clear(),e.status?t.resultOrderData(e.data):Object(r["a"])(e.info),t.orderBtnFlag=!1})).catch((function(e){r["a"].clear(),console.log(e),Object(r["a"])("网络连接错误，请检查网络是否可用"),t.orderBtnFlag=!1}))},resultOrderData:function(t){switch(this.$store.commit("UPDATECART",t.shop_count),t.pay+""){case"0":this.$router.replace("/order/detail/"+t.order_id);break;case"1":this.$wx.config(t.result.config);var e=t.result.options,s=this;e.success=function(){Object(r["a"])("支付成功"),setTimeout((function(){s.$router.replace("/order/detail/"+t.order_id)}),1500)},this.$wx.chooseWXPay(e);break;case"2":location.href=t.result.url+"&redirect_url="+location.origin+"/order/detail/"+t.order_id;break;case"3":var i=document.createElement("div");i.innerHTML=t.result,document.body.appendChild(i),document.forms.alipaysubmit.submit();break;case"99":this.$storage.set("order_msg",t.msg),this.$storage.set("order_id",t.order_id),this.$router.replace("/cart/info");break}},selectPayment:function(t){this.payment=t},onCoupons:function(t){this.isCouponStatus=!1,this.params.bonus_id=t.id,this.bonusText=t.value,this.bonusId=t.id,this.onLoadOrder()},onShipping:function(t){this.shippingType=t,this.params.shipping_type=t,1==t?this.onSelectedAddress(this.address):this.onSelectedStore(this.store)},onSelectedStore:function(t){this.isStoreStatus=!1,this.chosenStoreId=t.id,this.params.store_id=this.chosenStoreId,this.store=t,delete this.params.address_id,this.onLoadOrder()},onSelectedAddress:function(t){this.isAddressStatus=!1,this.chosenAddressId=t.id,this.params.address_id=this.chosenAddressId,this.address=t,delete this.params.store_id,this.onLoadOrder()},onAdd:function(){this.$router.push({path:"/ucenter/address/add"})}}},j=w,A=(s("645f"),Object(b["a"])(j,a,n,!1,null,"32084f73",null));e["default"]=A.exports},"8a0b":function(t,e,s){},"9f7a":function(t,e,s){},a8fa:function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s("a142");function a(){return!i["g"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var n=s("a8c1"),r=a();function o(){r&&Object(n["d"])(Object(n["a"])())}},b402:function(t,e,s){},badd:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mask",class:{hide:0==t.value,show:1==t.value},on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}},[t._t("default")],2)},a=[],n={name:"Popup",props:{value:{type:Boolean,default:!1}},methods:{onClose:function(){}}},r=n,o=(s("3631"),s("2877")),l=Object(o["a"])(r,i,a,!1,null,"d88c033e",null);e["a"]=l.exports},be7f:function(t,e,s){"use strict";s("68ef"),s("9d70"),s("3743"),s("1a04"),s("1146")},c194:function(t,e,s){"use strict";s("68ef"),s("9d70"),s("3743"),s("1a04")},cce7:function(t,e,s){},dfaf:function(t,e,s){"use strict";s.d(e,"a",(function(){return i}));var i={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,clickable:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0}}}}]);