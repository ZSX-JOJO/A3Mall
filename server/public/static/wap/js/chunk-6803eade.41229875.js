(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6803eade"],{"34e2":function(t,e,s){},"40db":function(t,e,s){},"4d41":function(t,e,s){t.exports=s.p+"static/wap/img/avatar.1ba4f24b.png"},59043:function(t,e,s){"use strict";var i=s("34e2"),a=s.n(i);a.a},deea:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav-bar",{attrs:{title:"商品详情","left-arrow":"",fixed:!0,placeholder:!0,"z-index":9999},on:{"click-left":t.prev}}),i("div",{style:"height:"+t.clientHeight+"px"},[i("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[i("van-swipe",{staticClass:"swiper-box",attrs:{loop:!0},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[i("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t,e){return i("van-swipe-item",{key:e},[i("img",{attrs:{src:t}})])})),1),i("div",{staticClass:"goods-price"},[i("div",{staticClass:"price"},[i("span",[t._v("￥"),i("i",[t._v(t._s(t.products.sell_price))])]),i("span",[t._v("原价格"),i("i",[t._v("￥"+t._s(t.products.market_price))])])]),i("div",{staticClass:"count-down-box"},[i("count-down",{attrs:{"now-time":t.products.now_time,"start-time":t.products.start_time,"end-time":t.products.end_time,status:t.isActivityStatus},on:{"update:status":function(e){t.isActivityStatus=e}}})],1)]),i("div",{staticClass:"goods-info clear"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.products.title)+" ")]),i("div",{staticClass:"goods-info-box"},[i("span",[t._v("库存: "+t._s(t.products.store_nums)+"件")]),i("span",[t._v("销量: "+t._s(t.products.sale)+"件")])])]),t.group.count>0?i("div",{staticClass:"add-wrap clear"},[i("div",{staticClass:"title"},[t._v(t._s(t.group.count)+"人在拼单，可直接参与")]),i("div",{staticClass:"add-list clear"},[i("van-swipe",{staticStyle:{height:"132px"},attrs:{autoplay:3e3,vertical:"","show-indicators":!1}},t._l(t.group.list,(function(e,a){return i("van-swipe-item",{key:a},t._l(e,(function(e,a){return i("div",{key:a,staticClass:"item-box"},[i("div",{staticClass:"avatar"},[e.avatar?t._e():i("img",{attrs:{src:s("4d41")}}),e.avatar?i("img",{attrs:{src:e.avatar}}):t._e()]),i("div",{staticClass:"username"},[t._v(t._s(e.nickname))]),i("div",{staticClass:"info"},[i("div",{staticClass:"a"},[t._v("还差"),i("i",[t._v(t._s(e.people))]),t._v("人成团")]),i("div",{staticClass:"b",staticStyle:{"font-size":"12px"}},[i("count-down",{attrs:{theme:"","now-time":e.now_time,"start-time":e.start_time,"end-time":e.end_time,startText:"",endText:"",finishText:"",dayText:":",hourText:":",minuteText:":",secondText:""}})],1)]),i("div",{staticClass:"btn"},[i("span",{on:{click:function(s){return t.goCart(e.id,e.kid)}}},[t._v("去拼单")])])])})),0)})),1)],1)]):t._e(),i("div",{staticClass:"group-wrap clear"},[i("div",{staticClass:"title"},[i("div",[t._v("拼团玩法")])]),i("div",{staticClass:"group-box"},[i("div",{staticClass:"line"}),i("div",{staticClass:"item"},[i("span",[t._v("1")]),i("span",[t._v("开团/参团")])]),i("div",{staticClass:"item"},[i("span",[t._v("2")]),i("span",[t._v("邀请好友")])]),i("div",{staticClass:"item"},[i("span",[t._v("3")]),i("span",[t._v("满员发货")])])])]),i("div",{staticClass:"goods-comments clear"},[i("div",{staticClass:"title"},[i("span",[t._v("商品评价")]),t.comments.length>0?i("span",{on:{click:function(e){return t.$router.push("/comments/group/"+t.products.goods_id)}}},[t._v("更多 >")]):t._e()]),t.comments.length<=0?i("div",{staticClass:"comments-empty"},[t._v("该商品还没有评论哦！")]):t._e(),t.comments.length>0?i("div",{staticClass:"goods-comments-list clear"},t._l(t.comments,(function(e,s){return i("div",{key:s,staticClass:"goods-comments-box clear"},[i("div",{staticClass:"t"},[i("div",{staticClass:"u"},[i("span",[i("img",{attrs:{src:e.avatar}})]),i("span",[t._v(t._s(e.username))])]),i("div",{staticClass:"time"},[t._v(t._s(e.time))])]),i("div",{staticClass:"c"},[t._v(t._s(e.content))]),e.reply_content?i("div",{staticClass:"d"},[i("div",{staticClass:"d-1"},[t._v("商家回复")]),i("div",{staticClass:"d-2"},[t._v(t._s(e.reply_content))])]):t._e()])})),0):t._e()]),i("div",{staticClass:"goods-content clear"},[i("div",{staticClass:"title"},[t._v("图文详情")]),i("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img",loading:"../../assets/images/loader.gif"},expression:"{ selector: 'img', loading: '../../assets/images/loader.gif' }"}],staticClass:"clear",domProps:{innerHTML:t._s(t.html)}})])],1)],1),i("sku-action",{attrs:{goods:t.products,attribute:t.attribute,item:t.item,"goods-info":t.selectedGoodsInfo,fields:t.fields},on:{"update:goodsInfo":function(e){t.selectedGoodsInfo=e},"update:goods-info":function(e){t.selectedGoodsInfo=e}},model:{value:t.isSkuStatus,callback:function(e){t.isSkuStatus=e},expression:"isSkuStatus"}}),i("goods-action",[i("goods-action-icon",{attrs:{icon:"home",text:"首页"},on:{click:function(e){return t.$router.replace("/")}}}),i("goods-action-button",{attrs:{type:"cart",text:"单独购买"},on:{click:t.onAddCartClicked}}),i("goods-action-button",{attrs:{type:"buy",text:"发起拼单"},on:{click:t.onBuyClicked}})],1)],1)},a=[],n=(s("b0c0"),s("ac1f"),s("5319"),s("ade3")),o=(s("4b0a"),s("2bb1")),c=(s("7844"),s("5596")),r=(s("ab71"),s("58e6")),d=(s("68ef"),s("40db"),s("d282")),u=s("4598"),l=s("68ed"),m=1e3,f=60*m,h=60*f,p=24*h;function v(t){var e=Math.floor(t/p),s=Math.floor(t%p/h),i=Math.floor(t%h/f),a=Math.floor(t%f/m),n=Math.floor(t%m);return{days:e,hours:s,minutes:i,seconds:a,milliseconds:n}}function g(t,e){var s=e.days,i=e.hours,a=e.minutes,n=e.seconds,o=e.milliseconds;if(-1===t.indexOf("DD")?i+=24*s:t=t.replace("DD",Object(l["b"])(s)),-1===t.indexOf("HH")?a+=60*i:t=t.replace("HH",Object(l["b"])(i)),-1===t.indexOf("mm")?n+=60*a:t=t.replace("mm",Object(l["b"])(a)),-1===t.indexOf("ss")?o+=1e3*n:t=t.replace("ss",Object(l["b"])(n)),-1!==t.indexOf("S")){var c=Object(l["b"])(o,3);t=-1!==t.indexOf("SSS")?t.replace("SSS",c):-1!==t.indexOf("SS")?t.replace("SS",c.slice(0,2)):t.replace("S",c.charAt(0))}return t}function _(t,e){return Math.floor(t/1e3)===Math.floor(e/1e3)}var b,k=Object(d["a"])("count-down"),C=k[0],S=k[1],y=C({props:{millisecond:Boolean,time:{type:[Number,String],default:0},format:{type:String,default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0}},data:function(){return{remain:0}},computed:{timeData:function(){return v(this.remain)},formattedTime:function(){return g(this.format,this.timeData)}},watch:{time:{immediate:!0,handler:"reset"}},activated:function(){this.keepAlivePaused&&(this.counting=!0,this.keepAlivePaused=!1,this.tick())},deactivated:function(){this.counting&&(this.pause(),this.keepAlivePaused=!0)},beforeDestroy:function(){this.pause()},methods:{start:function(){this.counting||(this.counting=!0,this.endTime=Date.now()+this.remain,this.tick())},pause:function(){this.counting=!1,Object(u["a"])(this.rafId)},reset:function(){this.pause(),this.remain=+this.time,this.autoStart&&this.start()},tick:function(){this.millisecond?this.microTick():this.macroTick()},microTick:function(){var t=this;this.rafId=Object(u["c"])((function(){t.counting&&(t.setRemain(t.getRemain()),t.remain>0&&t.microTick())}))},macroTick:function(){var t=this;this.rafId=Object(u["c"])((function(){if(t.counting){var e=t.getRemain();_(e,t.remain)&&0!==e||t.setRemain(e),t.remain>0&&t.macroTick()}}))},getRemain:function(){return Math.max(this.endTime-Date.now(),0)},setRemain:function(t){this.remain=t,this.$emit("change",this.timeData),0===t&&(this.pause(),this.$emit("finish"))}},render:function(){var t=arguments[0];return t("div",{class:S()},[this.slots("default",this.timeData)||this.formattedTime])}}),w=(s("66cf"),s("343b")),x=(s("e7e5"),s("d399")),O=s("2b0e"),j=s("85b3"),$=s("3050"),I=s("d434"),R=s("7cc0"),T=s("ed72"),D=s("a65e");x["a"].setDefaultOptions({duration:5e3}),O["a"].use(w["a"]);var G={name:"GroupView",components:(b={CountDown:y},Object(n["a"])(b,r["a"].name,r["a"]),Object(n["a"])(b,$["a"].name,$["a"]),Object(n["a"])(b,c["a"].name,c["a"]),Object(n["a"])(b,o["a"].name,o["a"]),Object(n["a"])(b,R["a"].name,R["a"]),Object(n["a"])(b,D["a"].name,D["a"]),Object(n["a"])(b,T["a"].name,T["a"]),Object(n["a"])(b,y.name,y),Object(n["a"])(b,I["a"].name,I["a"]),Object(n["a"])(b,j["a"].name,j["a"]),b),data:function(){return{fields:["id","goods_id"],images:[],isSkuStatus:!1,selectedGoodsInfo:{},products:{},attribute:[],item:{},current:0,isRefresh:!1,kId:0,group:{},isActivityStatus:0,clientHeight:window.outerHeight-50,comments:[],html:""}},created:function(){this.onLoad()},methods:{onLoad:function(){var t=this;this.$http.getGroupDetail({id:this.$route.params.id}).then((function(e){t.products=e.data.goods;var s=t.$request.domain()+"static/images/loader.gif";t.html=e.data.goods.content.replace(/src=/g," data-loading='"+s+"' data-src="),t.attribute=e.data.attr,t.item=e.data.item,t.images=e.data.photo,t.group=e.data.group,t.comments=e.data.comments})).catch((function(e){t.$router.replace("/404")}))},onChange:function(t){this.current=t},onRefresh:function(){var t=this;setTimeout((function(){t.isRefresh=!1,t.onLoad()}),1500)},onBuyClicked:function(){var t=this;return 0==this.isActivityStatus?(Object(x["a"])("活动己结束！"),!1):2==this.isActivityStatus?(Object(x["a"])("活动未开始！"),!1):0!=this.isSkuStatus?this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.id,kid:t.kId,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"group"}})})).catch((function(){t.$storage.set("VUE_REFERER","/group/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(x["a"])("请选择规格！"),!1):void(this.isSkuStatus=!0)},onAddCartClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.goods_id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"buy"}})})).catch((function(){t.$storage.set("VUE_REFERER","/group/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(x["a"])("请选择规格！"),!1);this.isSkuStatus=!0},prev:function(){this.$tools.prev()},goCart:function(t,e){var s=this.$storage.get("users",!0);if(void 0!=s&&s.id==e)return Object(x["a"])("亲不能和自己拼单哦！"),!1;this.kId=t,this.isSkuStatus=!0}},watch:{isShow:function(t){!1===t&&(this.kId=0)}}},A=G,H=(s("59043"),s("2877")),E=Object(H["a"])(A,i,a,!1,null,"63e9705e",null);e["default"]=E.exports}}]);