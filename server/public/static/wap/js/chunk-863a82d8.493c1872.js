(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-863a82d8"],{1192:function(t,s,e){"use strict";e.r(s);var a,o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("nav-bar",{attrs:{title:"商品详情","left-arrow":"",fixed:!0,placeholder:!0,"z-index":9999},on:{"click-left":t.prev}}),e("div",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(s){t.isRefresh=s},expression:"isRefresh"}},[e("van-swipe",{staticClass:"swiper-box",attrs:{loop:!0},on:{change:t.onChange},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"custom-indicator"},[t._v(" "+t._s(t.current+1)+" / "+t._s(t.images.length)+" ")])]},proxy:!0}])},t._l(t.images,(function(t,s){return e("van-swipe-item",{key:s},[e("img",{attrs:{src:t}})])})),1),e("div",{staticClass:"goods-info clear"},[e("div",{staticClass:"price"},[e("span",[t._v("￥"),e("i",[t._v(t._s(t.products.sell_price))])])]),e("div",{staticClass:"title"},[t._v(" "+t._s(t.products.title)+" ")]),e("div",{staticClass:"goods-info-box"},[e("span",[t._v("￥"),e("i",[t._v(t._s(t.products.market_price))])]),e("span",[t._v("库存: "+t._s(t.products.store_nums)+"件")]),e("span",[t._v("销量: "+t._s(t.products.sale)+"件")])])]),e("div",{staticClass:"goods-comments clear"},[e("div",{staticClass:"title"},[e("span",[t._v("商品评价")]),t.comments.length>0?e("span",{on:{click:function(s){return t.$router.push("/comments/special/"+t.products.goods_id)}}},[t._v("更多 >")]):t._e()]),t.comments.length<=0?e("div",{staticClass:"comments-empty"},[t._v("该商品还没有评论哦！")]):t._e(),t.comments.length>0?e("div",{staticClass:"goods-comments-list clear"},t._l(t.comments,(function(s,a){return e("div",{key:a,staticClass:"goods-comments-box clear"},[e("div",{staticClass:"t"},[e("div",{staticClass:"u"},[e("span",[e("img",{attrs:{src:s.avatar}})]),e("span",[t._v(t._s(s.username))])]),e("div",{staticClass:"time"},[t._v(t._s(s.time))])]),e("div",{staticClass:"c"},[t._v(t._s(s.content))]),s.reply_content?e("div",{staticClass:"d"},[e("div",{staticClass:"d-1"},[t._v("商家回复")]),e("div",{staticClass:"d-2"},[t._v(t._s(s.reply_content))])]):t._e()])})),0):t._e()]),e("div",{staticClass:"goods-content clear"},[e("div",{staticClass:"title"},[t._v("图文详情")]),e("div",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img",loading:"../../assets/images/loader.gif"},expression:"{ selector: 'img', loading: '../../assets/images/loader.gif' }"}],staticClass:"clear",domProps:{innerHTML:t._s(t.html)}})])],1)],1),e("sku-action",{attrs:{goods:t.products,attribute:t.attribute,item:t.item,"goods-info":t.selectedGoodsInfo,fields:t.fields},on:{"update:goodsInfo":function(s){t.selectedGoodsInfo=s},"update:goods-info":function(s){t.selectedGoodsInfo=s}},model:{value:t.isSkuStatus,callback:function(s){t.isSkuStatus=s},expression:"isSkuStatus"}}),e("goods-action",[e("goods-action-icon",{attrs:{icon:"home",text:"首页"},on:{click:function(s){return t.$router.replace("/")}}}),e("goods-action-button",{attrs:{type:"buy",text:"立即购买"},on:{click:t.onBuyClicked}})],1)],1)},i=[],n=(e("b0c0"),e("ac1f"),e("5319"),e("ade3")),c=(e("4b0a"),e("2bb1")),r=(e("7844"),e("5596")),d=(e("ab71"),e("58e6")),l=(e("66cf"),e("343b")),u=(e("e7e5"),e("d399")),m=e("2b0e"),p=e("85b3"),f=e("7cc0"),v=e("ed72"),h=e("a65e"),_=e("3050");u["a"].setDefaultOptions({duration:5e3}),m["a"].use(l["a"]);var g={name:"SpecialView",components:(a={GoodsActionIcon:h["a"],GoodsActionButton:v["a"],GoodsAction:f["a"]},Object(n["a"])(a,d["a"].name,d["a"]),Object(n["a"])(a,_["a"].name,_["a"]),Object(n["a"])(a,r["a"].name,r["a"]),Object(n["a"])(a,c["a"].name,c["a"]),Object(n["a"])(a,p["a"].name,p["a"]),Object(n["a"])(a,f["a"].name,f["a"]),Object(n["a"])(a,v["a"].name,v["a"]),Object(n["a"])(a,h["a"].name,h["a"]),a),data:function(){return{fields:["id"],isSkuStatus:!1,images:[],comments:[],current:0,isRefresh:!1,selectedGoodsInfo:{},products:{},attribute:[],item:{},html:""}},created:function(){var t=this.$storage.get("users",!0);this.cartCount=null!=t?t.shop_count:0,this.onLoad()},methods:{onLoad:function(){var t=this;this.$http.getSpeciaDetail({id:this.$route.params.id}).then((function(s){t.products=s.data.goods;var e=t.$request.domain()+"static/images/loader.gif";t.html=s.data.goods.content.replace(/src=/g," data-loading='"+e+"' data-src="),t.attribute=s.data.attr,t.item=s.data.item,t.images=s.data.photo,t.comments=s.data.comments})).catch((function(s){t.$router.replace("/404")}))},onChange:function(t){this.current=t},onRefresh:function(){var t=this;setTimeout((function(){t.isRefresh=!1,t.onLoad()}),1500)},onBuyClicked:function(){var t=this;if(0!=this.isSkuStatus)return this.selectedGoodsInfo.isSubmit?void this.$store.dispatch("isUsers").then((function(){t.$router.push({path:"/cart/confirm",query:{id:t.selectedGoodsInfo.id,sku_id:t.selectedGoodsInfo.selectedSku.id,num:t.selectedGoodsInfo.num,type:"special"}})})).catch((function(){t.$storage.set("VUE_REFERER","/special/view/"+t.$route.params.id),t.$router.push("/public/login")})):(Object(u["a"])("请选择规格！"),!1);this.isSkuStatus=!0},prev:function(){this.$tools.prev()}}},b=g,C=(e("391b"),e("2877")),k=Object(C["a"])(b,o,i,!1,null,"3298b26a",null);s["default"]=k.exports},"391b":function(t,s,e){"use strict";var a=e("e23a"),o=e.n(a);o.a},e23a:function(t,s,e){}}]);